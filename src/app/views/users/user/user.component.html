<app-view-container>
    <ng-container toolbar>
        <h2>User</h2>
        <breadcrumb #parent>
            <ol class="breadcrumb">
                <ng-template ngFor let-route [ngForOf]="parent.breadcrumbs">
                    <li *ngIf="!route.terminal" class="breadcrumb-item">
                        <a href="" [routerLink]="[route.url]">{{ route.displayName }}</a>
                    </li>
                    <li *ngIf="route.terminal" class="breadcrumb-item active" aria-current="page">
                        {{ route.displayName }}</li>
                </ng-template>
            </ol>
        </breadcrumb>
    </ng-container>

    <ng-container content>
        <div class="songsheet">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="provider-avatar-images">
                                        <img class="image__picture"
                                            [src]="(avatarImage | async) || 'assets/img/avatar-placeholder.jpg'"
                                            alt="Profile image" #image>
                                    </div>
                                    <h2 class="font-bold m-b-xs">
                                        {{user.firstName}} {{user.lastName}}
                                    </h2>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Phone number:</dt>
                                                <dd class="d-inline-block">{{(user.phoneNumber | phone) || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Mobile number:</dt>
                                                <dd class="d-inline-block">{{(user.mobileNumber | phone) || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Country:</dt>
                                                <dd class="d-inline-block">{{user.country || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> State:</dt>
                                                <dd class="d-inline-block">{{user.state || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> City:</dt>
                                                <dd class="d-inline-block">{{user.city || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Address:</dt>
                                                <dd class="d-inline-block">{{user.address || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Zip Code:</dt>
                                                <dd class="d-inline-block">{{user.zip || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block"> Status:</dt>
                                                <dd class="d-inline-block">
                                                    {{user.isSubscribed ? 'Subscribed' : 'Not subscribed'}}</dd>
                                            </dl>
                                            <dl *ngIf="user.idCode" class="m-t-md">
                                                <dt class="d-inline-block"> Driver License/ID number:</dt>
                                                <dd class="d-inline-block">{{user.idCode || 'N/A'}}</dd>
                                            </dl>
                                            <dl class="m-t-md">
                                                <dt class="d-inline-block">Subscription status</dt>
                                                <dd class=d-inline-block>
                                                    <app-toggle [isActive]="isSubscriptionActive | async" [onChange]="unsubscribe.bind(this)"></app-toggle>
                                                </dd>
                                            </dl>
                                        </div>
                                    </div>
                                    <hr>

                                    <div class="btn-group">
                                        <button routerLink="/users" class="btn btn-primary btn-sm">
                                            <i class="fa fa-cart-plus"></i> Return
                                        </button>
                                        <button class="btn-white btn btn-xs" (click)="changeState(user)"
                                            *ngIf="!user.isBlocked">Block
                                        </button>
                                        <button class="btn-white btn btn-xs" (click)="changeState(user)"
                                            *ngIf="user.isBlocked">Unblock
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</app-view-container>